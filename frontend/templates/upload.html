{% extends 'base.html' %}

{% block title %}Transformación de PDFs a texto{% endblock %}

{% block header_links %}
  <a href="#" class="header-link">Transformación de PDFs a texto</a>
  <a href="#" class="header-link">Léame</a>
{% endblock %}

{% block main %}
  <h1 class="main-title">Transformación de PDFs a texto</h1>

  <div class="buttons-container" id="controls">
    <!-- Botón Cargar pdf -->
    <label for="fileUpload" id="uploadBtn" class="btn upload-btn" role="button" aria-live="polite">
      <span class="upload-text">Cargar pdf</span>
      <span class="spinner" aria-hidden="true" style="display:none;"></span>
      <input type="file" id="fileUpload" name="file" hidden />
    </label>

    <!-- Botón Procesar pdf (oculto inicialmente) -->
    <button id="processBtn" class="btn" style="display:none;">Procesar pdf</button>

    <!-- Botón Descargar resultado (oculto inicialmente) -->
    <button id="downloadBtn" class="btn" style="display:none;">Descargar resultado</button>

    <div id="fileName" class="file-name" style="margin-top:8px;"></div>
    <div id="errorMessage" class="response-message" style="color:red; margin-top:8px;"></div>
  </div>

  <!-- Overlay de loading que se muestra durante procesamiento (oculto por defecto) -->
  <div id="loadingOverlay" style="display:none;">
    <div class="loading-box">
      <div class="big-spinner" aria-hidden="true"></div>
      <div id="loadingText">Cargando...</div>
    </div>
  </div>

  <style>
    /* Spinner y estilos (puedes mover esto a styles.css cuando quieras) */
    .upload-btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 6px;
      background: #f0f0f0;
      cursor: pointer;
    }
    .btn {
      padding: 8px 12px;
      border-radius: 6px;
      background: #f0f0f0;
      cursor: pointer;
      margin-left: 8px;
    }
    .upload-btn.loading { pointer-events: none; opacity: 0.8; }
    .spinner {
      width: 16px; height: 16px;
      border: 2px solid rgba(0,0,0,0.15);
      border-top-color: rgba(0,0,0,0.7);
      border-radius: 50%;
      display: inline-block;
      animation: spin 0.8s linear infinite;
    }
    .big-spinner {
      width: 48px; height: 48px;
      border: 4px solid rgba(0,0,0,0.15);
      border-top-color: rgba(0,0,0,0.7);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 8px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Loading overlay centrado */
    #loadingOverlay {
      position: fixed; inset: 0;
      background: rgba(255,255,255,0.9);
      display: flex; align-items: center; justify-content: center;
      z-index: 9999;
    }
    .loading-box {
      display:flex; flex-direction: column; align-items: center;
      padding: 20px 30px; border-radius: 10px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      background: white; text-align: center;
    }
    .file-name { font-size: 0.95rem; color: #333; }
    .response-message { font-size: 0.95rem; }
  </style>
{% endblock %}
